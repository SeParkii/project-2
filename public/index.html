<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1"
  />

  <title>Concert Ticket Manager</title>

  <link
    rel="preconnect"
    href="https://fonts.googleapis.com"
  >
  <link
    rel="preconnect"
    href="https://fonts.gstatic.com"
    crossorigin
  >
  <link
    href="https://fonts.googleapis.com/css2?family=Jost:wght@100..900&display=swap"
    rel="stylesheet"
  >
  <link
    rel="stylesheet"
    href="style.css"
  />

  <!--  DOMPurify cleans up HTML to prevent XSS attacks -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.3.0/dist/purify.min.js"></script>

</head>

<body>
  <header>
    <h1>Concert Ticket Manager</h1>
    <h4>Allows you to add the concert ticket‚Äôs details by recording all the concerts that you have went to before.</h4>
  </header>

  <section id="status">
    <p id="readyStatus">‚úÖ MongoDB is Ready</p>
    <p id="notReadyStatus">
      ‚ùå MongoDB is not connected. Please check your connection string in
      <code>.env</code> file.
    </p>
  </section>

  <!-- üîò BUTTON THAT OPENS THE FORM POPOVER -->
  <button
    id="createButton"
    popovertarget="formPopover"
  >
    Add New Event
  </button>

  <!-- üé´ POPOVER WITH THE FORM -->
  <div
    id="formPopover"
    popover
  >
    <h2 id="formHeading">Concert Ticket Details</h2>
    <p>Store details about a concert you‚Äôre going to or have attended.</p>

    <form id="myForm">
      <!-- Hidden field to store ID for updates -->
      <input
        type="hidden"
        name="id"
        id="id"
      />
    
      <fieldset>
        <label for="concertName">Concert Name</label>
        <input
          required
          type="text"
          name="concertName"
          id="concertName"
          placeholder="e.g. The Starry Night Tour"
          autocomplete="off"
        />
        <small class="validation">Concert name is required</small>
      </fieldset>
    
      <fieldset>
        <label for="artist">Artist</label>
        <input
          required
          type="text"
          name="artist"
          id="artist"
          placeholder="e.g. Taylor Swift"
          autocomplete="off"
        />
        <small class="validation">Artist is required</small>
      </fieldset>
    
      <fieldset>
        <label for="venue">Venue</label>
        <input
          type="text"
          name="venue"
          id="venue"
          placeholder="e.g. Scotiabank Arena"
          autocomplete="off"
        />
      </fieldset>
    
      <fieldset>
        <label for="city">City</label>
        <input
          type="text"
          name="city"
          id="city"
          placeholder="e.g. Toronto, ON"
          autocomplete="off"
        />
      </fieldset>
    
      <fieldset>
        <label for="concertDate">Concert Date</label>
        <input
          type="date"
          name="concertDate"
          id="concertDate"
        />
      </fieldset>
    
      <fieldset>
        <label for="ticketType">Ticket Type</label>
        <select
          name="ticketType"
          id="ticketType"
        >
          <option
            value=""
            disabled
            selected
          >Select a ticket type</option>
          <optgroup label="General">
            <option value="General Admission">General Admission</option>
            <option value="VIP">VIP</option>
            <option value="Resale">Resale</option>
            <option value="Other">Other</option>
          </optgroup>
        </select>
      </fieldset>
    
      <fieldset>
        <label for="price">Ticket Price</label>
        <small>Use numbers only</small>
        <input
          type="number"
          name="price"
          id="price"
          min="0"
          step="0.01"
          placeholder="e.g. 129.99"
        />
      </fieldset>
    
      <fieldset>
        <label for="seatInfo">Section / Row / Seat</label>
        <input
          type="text"
          name="seatInfo"
          id="seatInfo"
          placeholder="e.g. Sec 112, Row F, Seat 8"
          autocomplete="off"
        />
      </fieldset>
    
      <!-- üîª we removed Order Number, Platform, Attendance, Excitement Level -->
    
      <fieldset>
        <label for="notes">Notes</label>
        <small>Special memories, favorite songs, or other details.</small>
        <textarea
          placeholder="e.g. First time seeing them live, hoping they play my favourite song..."
          name="notes"
          id="notes"
          rows="5"
          cols="30"
          minlength="10"
        ></textarea>
        <small class="validation">Notes must be at least 10 characters.</small>
      </fieldset>
    
      <fieldset>
        <button
          class="save"
          type="submit"
        >
          Save
        </button>
        <button
          class="cancel"
          type="button"
          popovertarget="formPopover"
          popovertargetaction="hide"
        >
          Cancel
        </button>
      </fieldset>
    </form>    
  </div>

  <main>
    <h2>üéµ Your Concert Tickets</h2>
    <section id="contentArea"></section>
  </main>

  <section id="intro">
    <h3>About</h3>
    <p>
      This page lets you manage a collection of concert tickets using full
      <a href="https://developer.mozilla.org/en-US/docs/Glossary/CRUD">CRUD</a> operations:
      Create, Read, Update, and Delete.
    </p>
    <p>
      Our database stores the detailed information about every collected concert tickets that are saved from the user. Each ticket is one document
      in MongoDB with fields such as concert name, artist, venue, date, seat details, and price.
    </p>
    <ol>
      <li>
        Use the <strong>Add New Event</strong> button to open the form and add a new concert.
      </li>
      <li>
        Existing tickets will appear in the list below. You can edit or delete them with the
        buttons that your JavaScript will generate for each record.
      </li>
      <li>
        On the backend, Express endpoints listen for HTTP requests (GET, POST, PUT, DELETE)
        and Prisma talks to MongoDB.
      </li>
    </ol>
    <p>
      By connecting the form, the display template, and the API endpoints, you can track all the concerts
      you‚Äôve gone to (or plan to go to) in one place.
    </p>
  </section>

  <footer>
    Created in the context of Systems Design in the Interaction Design program at Sheridan College.
  </footer>

  <script
    src="script.js"
    type="module"
  ></script>

</body>

</html>
